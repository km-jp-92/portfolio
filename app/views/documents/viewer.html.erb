<div class="w-full mx-auto">
  <!-- PDF選択セクション -->
  <div class="flex justify-between">
  <div 
    data-controller="pdf-selector"
    data-pdf-selector-group-id-value="<%= @document_group.id %>"
    class="flex items-center bg-gray-100 rounded-lg shadow-sm"
  >
    <label for="pdf-select" class="text-gray-700 font-semibold">資料を選択：</label>

    <select 
      id="pdf-select"
      data-action="change->pdf-selector#change"
      class="border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:outline-none"
    >
      <option value="">選択してください</option>
      <% @documents.each do |doc| %>
        <option value="<%= doc.id %>" <%= "selected" if doc == @document %>>
          <%= doc.file.filename.to_s %>
        </option>
      <% end %>
    </select>
    </div>
    <div>
    <a href="<%= @document.present? ? url_for(@document.file) : '#' %>" 
      target="_blank" class="text-blue-500 underline font-semibold ml-4"> PDFをブラウザで開く </a>
    </div>
  </div>

  <!-- PDF表示セクション（1ページずつ表示） -->
<div 
  data-controller="pdf-viewer"
  data-pdf-viewer-url-value="<%= url_for(@document.file) %>"
  data-pdf-viewer-pdf-id-value="<%= @document.id %>"
  class="flex flex-col items-center bg-white rounded-lg shadow-md max-h-[100vh] overflow-hidden relative"
>
  <div class="flex items-center space-x-3">
  <!-- 役割トグルボタン -->
    <div class="flex space-x-3">
      <button data-action="click->pdf-viewer#selectPresenter"
              data-pdf-viewer-target="presenterBtn" class="px-3 py-1 bg-gray-200 text-black rounded">発表者になる</button>
      <button data-action="click->pdf-viewer#selectAudience"
              data-pdf-viewer-target="audienceBtn" class="px-3 py-1 bg-gray-200 text-black rounded">聴講者になる</button>
    </div>

  <!-- ページコントロール -->
  <div class="flex items-center space-x-3">
    <button data-action="click->pdf-viewer#prevPage" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">◀︎</button>
    <span>
      ページ 
      <span data-pdf-viewer-target="pageNumber">1</span> /
      <span data-pdf-viewer-target="totalPages">1</span>
    </span>
    <button data-action="click->pdf-viewer#nextPage" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">▶︎</button>
  <!-- ズームボタン -->
    <button data-action="click->pdf-viewer#zoomOut" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400 font-bold">−</button>
    <button data-action="click->pdf-viewer#zoomIn" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400 font-bold">＋</button>
  </div>
  </div>

  <!-- PDF描画エリア -->
  <div class="overflow-auto w-full h-full">
    <canvas data-pdf-viewer-target="canvas" class="border shadow-md block mx-auto"></canvas>
  </div>
  </div>
</div>
